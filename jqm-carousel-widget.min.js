/*!
  jQuery Mobile Basic Carousel Widget
  Author: @golodhros
  Widget pattern application based on @addyosmani article on Smashing Magazine

  Copyright (c) 2013 Marcos Iglesias Valle
  Licensed under the MIT license.
 */;(function($,window,document,undefined){$.widget("mobile.carousel",$.mobile.widget,{options:{iTransitionSpeed:500,sTransitionType:'easeOutCirc',iNumSlides:0,iSliderWidth:0,isAutoPlay:false,iAutoPlayInterval:2000,sCounterElements:'.position em',sCounterOnClassName:'on',sSlideClassPrefix:'.slide-',sCarouselElementClass:'.carousel'},_iSlideCounter:0,_create:function(){this._setSliderInfo();this._bindOrientationChange();this._bindSwipeEvents();this._setAutoPlay();},_animateSlider:function(iElement,sDirection){var margin=sDirection==='right'?0:-this.options.iSliderWidth;$(this.options.sSlideClassPrefix+iElement).animate({marginLeft:margin},this.options.iTransitionSpeed,this.options.sTransitionType);},_bindOrientationChange:function(){var self=this;$(document).on('orientationchange',function(){self.resetCarousel();});},_bindSwipeEvents:function(){if(!$(this.options.sCarouselElementClass).length){return;}
$(this.options.sCarouselElementClass).on("swiperight",$(this.options.sCarouselElementClass),$.proxy(this.swipeRight,this)).on("swipeleft",$(this.options.sCarouselElementClass),$.proxy(this.swipeLeft,this));},_isLastSlide:function(){return(this._iSlideCounter===this.options.iNumSlides-1)?true:false;},_resetSlidePosition:function(){var iCurrentSlide=this._iSlideCounter;this.setDotCounter(0);this._setSlideCounter(0);if(iCurrentSlide!==0){for(var i=iCurrentSlide;i>-1;i--){this._animateSlider(i,"right");}}},resetDotCounter:function(){var options=this.options;$(options.sCounterElements).each(function(item){$(options.sCounterElements).eq(item).removeClass(options.sCounterOnClassName);});},_setAutoPlay:function(){if(this.options.isAutoPlay){this._autoPlayInterval=setInterval(function(){if(this._isLastSlide()){this._resetSlidePosition();}else{this.swipeLeft();}},this.options.iAutoPlayInterval);}},setDotCounter:function(iElement){this.resetDotCounter();$(this.options.sCounterElements).eq(iElement).addClass(this.options.sCounterOnClassName);},_setSlideCounter:function(iPosition){this._iSlideCounter=iPosition;},_setSliderInfo:function(){var $el=$(this.element),$carousel=$el.children(),$slides=$carousel.children(),iNumSlides=$slides.length,iSliderWidth=$el.width();$el.add($slides).css({width:iSliderWidth});$carousel.css({width:iSliderWidth*iNumSlides});this.options.iNumSlides=iNumSlides;this.options.iSliderWidth=iSliderWidth;},getCurrentSlideIndex:function(){return this._iSlideCounter;},resetCarousel:function(){this.stopAutoPlay();this._resetSlidePosition();this._setSliderInfo();},stopAutoPlay:function(){if(this._autoPlayInterval){window.clearInterval(this._autoPlayInterval);}},swipeLeft:function(){if(this._isLastSlide()){return;}
this._animateSlider(this._iSlideCounter,"left");this._iSlideCounter++;this.setDotCounter(this._iSlideCounter);},swipeRight:function(){if(this._iSlideCounter===0){return;}
this._iSlideCounter--;this._animateSlider(this._iSlideCounter,"right");this.setDotCounter(this._iSlideCounter);},destroy:function(){$.Widget.prototype.destroy.call(this);}});$(document).bind("pageshow",function(e){$(e.target).find(":jqmData(role='carousel')").carousel({});});})(jQuery,window,document);